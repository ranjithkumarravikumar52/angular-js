<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Basic angular js</title>
    <!--this line brings in angular lib files from CDN-->
    <script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
</head>
<body>
    <!--ng app directive will hook the block and this is where angular js starts loading in-->
    <!-- ng-controller is a directive, and controller in angular js are javascript objects that contains
      1. attributes/properties
      2. functions
      -->
    <div ng-app = "mainApp" ng-controller = "studentController">
        Enter first name: <input type = "text" ng-model = "student.firstName"><br>
        <br>
        Enter last name: <input type = "text" ng-model = "student.lastName"><br>
        <br>
        Enter fees: <input type="number" ng-model="student.fees"><br><br>

        <!--subjects-->
        <div ng-repeat="subject in student.subjects">
            <input type="checkbox" name="subject" ng-model="selectedSubject" ng-value="subject" ng-change="selectSubjectFunction(subject);"> {{subject}}<br>
        </div>

        <!--ng-disabled directive-->
        <input type = "checkbox" ng-model = "enableDisableButton1">Disable Button
        <button ng-disabled = "enableDisableButton1">Click Me</button>

        <br>

        <!--ng-show directive-->
        <input type="checkbox" ng-model="showDirectiveExample">Show Button
        <button ng-show="showDirectiveExample">Click me</button>

        <br>

        <!--ng-hide directive-->
        <input type = "checkbox" ng-model = "showHide2">Hide Button
        <button ng-hide = "showHide2">Click Me!</button>

        <br>

        <!--ng-click directive-->
        <p>Total click: {{ clickCounter }}</p>
        <button ng-click = "clickCounter = clickCounter + 1">Click Me!</button>

        <br>

        <h2>Output</h2>
        Your name in lowercase: {{student.fullName() | lowercase}}<br>
        Your name in uppercase: {{student.fullName() | uppercase}}<br>
        Your fees: {{student.fees | currency}}<br>
        Your subjects: <br>
        <li ng-repeat = "subject in resultArray">
            {{subject}}
        </li>
    </div>

    <!--each controller accepts $scope as a parameter, this scope  refers to the application/module that we need to handle-->
    <script>
        //this will load up the angular module
        var mainApp = angular.module("mainApp", []);

        //define our studentController function
        mainApp.controller('studentController', function($scope){

            $scope.student = {
                firstName : "Ranjith Kumar",
                lastName : "Ravikumar",

                fees: 500, //default value can be overridden in the input field

                //subjects is an array here
                subjects:[
                    "Maths", "Physics", "Chemistry"
                ],

                //to demonstrate that our scope object can contain functions too
                fullName : function(){
                    var studentObject;
                    studentObject = $scope.student;
                    return "Mr. "+studentObject.firstName +" "+ studentObject.lastName;
                }
            };

            $scope.resultArray = [];

            $scope.selectSubjectFunction = function (val) {
                //if val not present in result, then add
                console.log(val);
                if(!$scope.resultArray.includes(val)){
                    $scope.resultArray.push(val);
                }else{
                   var index = $scope.resultArray.indexOf(val);
                    if(index > -1){
                        $scope.resultArray.splice(index, 1);
                    }
                }
            };
        });
    </script>
</body>
</html>