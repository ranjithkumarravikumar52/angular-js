angular.module('phoneList')
    .component('phoneList', {
        templateUrl: 'phone-list/phone-list.template.html',
        controller: ['$http', function PhoneListController($http) {
            /**
             * Since we are making the assignment of the phones property in a callback function, where the this value is not defined, we also introduce a local variable called self that points back to the controller instance.
             */
            var self = this;
            self.orderProp = 'age';

            /**
             * $http makes an HTTP GET request to our web server, asking for phones.json (the URL is relative to our index.html file). The server responds by providing the data in the JSON file. (The response might just as well have been dynamically generated by a backend server. To the browser and our app, they both look the same. For the sake of simplicity, we will use JSON files in this tutorial.)
             */
            $http.get('phones/phones.json').then(function (response) {
                /**
                 * The $http service returns a promise object, which has a then() method. We call this method to handle the asynchronous response and assign the phone data to the controller, as a property called phones. Notice that Angular detected the JSON response and parsed it for us into the data property of the response object passed to our callback!
                 */
                self.phones = response.data;
            });
        }]
    });